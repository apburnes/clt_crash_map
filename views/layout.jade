doctype html
html
  head
    title= title
    meta(name='viewport', content='width=device-width, initial-scale=1.0')
    link(rel='stylesheet', href='/stylesheets/bootstrap.min.css')
    link(rel='stylesheet', href='/stylesheets/style.css')
    link(rel='stylesheet', href='/javascripts/leaflet/leaflet.css')
    link(rel='shortcut icon', href='/images/favicon.png', type='image/x-icon')
    script(src='/javascripts/leaflet/leaflet.js')
  body
    .container
      block content

  script(src='/javascripts/bootstrap.min.js')

  script.
    var map = L.map('map').setView([35.21, -80.85], 11);

    L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>',
    maxZoom: 18
    }).addTo(map);

    function onEachFeature(feature, layer) {
      var popup = feature.properties.msg

      layer.bindPopup(popup);
    }

    L.geoJson(!{JSON.stringify(geojson, null, 2)}, {
                    onEachFeature: onEachFeature,
                    pointToLayer: function(feature, latlng) {
                      return L.circleMarker(latlng, {
                        "radius": 8,
                        "fillColor": "#ff7800",
                        "color": "#000",
                        "weight": 1,
                        "opacity": 1,
                        "fillOpacity": 0.8
                      });
                    }
                  }).addTo(map);
